<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PrintClient &mdash; Mapbender3 Documentation</title>
    
    <link rel="stylesheet" href="../../../../../_static/mapbender3.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '3.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../../_static/mapbender3.ico"/>
    <link rel="top" title="Mapbender3 Documentation" href="../../../../../index.html" />
    <link rel="up" title="MapbenderCoreBundle" href="../index.html" />
    <link rel="next" title="Redlining" href="redlining.html" />
    <link rel="prev" title="POI (MeetingPoint)" href="poi.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="redlining.html" title="Redlining"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="poi.html" title="POI (MeetingPoint)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Mapbender3 Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" >Welcome to Mapbender3&#8217;s documentation!</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../../../bundles.html" >Bundle Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" accesskey="U">MapbenderCoreBundle</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="printclient">
<h1>PrintClient<a class="headerlink" href="#printclient" title="Permalink to this headline">¶</a></h1>
<p>Mapbender3 offers a PDF print, which print a defined area of the map. Before you print you can choose via the client these different possibilities:</p>
<blockquote>
<div><ul class="simple">
<li>Select scale,</li>
<li>Select quality,</li>
<li>Rotate the print frame,</li>
<li>Print legend.</li>
<li>Optional you can define individual input fields (f.e. title, comment, notice) which will also be printed in the pdf.</li>
</ul>
</div></blockquote>
<p>The print element uses print templates, which can be modified individually. In the print templates you can define regions for date, scale (text or scalebar), overview map and north arrow.</p>
<p>Mapbender3 contains already a collection of print templates (LibreOffice Draw files in formats A4 to A0), which can be modified individually.</p>
<a class="reference internal image-reference" href="../../../../../_images/print_client1.png"><img alt="../../../../../_images/print_client1.png" src="../../../../../_images/print_client1.png" style="width: 319.2px; height: 388.8px;" /></a>
<p>The PrintClient can be used both as a dialog and an element as part of the sidebar. If it is part of the sidebar, you have to activate the Print Frame first to start the print. If you have finished, you have to deactivate the Print Frame again to use the map again as usual (when used as a dialog this happens automatically by opening and closing the dialog window).</p>
<a class="reference internal image-reference" href="../../../../../_images/print_client_sidebar1.png"><img alt="../../../../../_images/print_client_sidebar1.png" src="../../../../../_images/print_client_sidebar1.png" style="width: 471.2px; height: 395.2px;" /></a>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../../../_images/print_client_configuration1.png"><img alt="../../../../../_images/print_client_configuration1.png" src="../../../../../_images/print_client_configuration1.png" style="width: 440.8px; height: 440.8px;" /></a>
<p>You need a button to show this element or you can use it in the sidepane. See <a class="reference internal" href="button.html"><em>Button</em></a> for inherited configuration options.</p>
<ul class="simple">
<li><strong>title</strong>: Title of the element. The title will be listed in &#8220;Layouts&#8221; and allows to distinguish between different buttons. The title will be displayed besides the button if &#8220;Show label&#8221; is activated.</li>
<li><strong>target</strong>: Id of Map element to query</li>
<li><strong>type</strong>: element or dialog, default is dialog</li>
<li><strong>scales</strong> -  define scales to choose from select-box or if empty free scale can be defined in a text-field</li>
<li><strong>rotatable</strong> - true/false use true for rotation, default is true</li>
<li><strong>print legend</strong> - true/false, default is false</li>
<li><strong>legend checkbox checked</strong> - (legend_default_behaviour) - true/false, if true the legend check-box is checked by default</li>
<li><strong>file_prefix</strong> - define the file prefix for the PDF that is generated (file_prefix_date.pdf will be created)</li>
<li><strong>quality_levels</strong> - define quality levels in DPI</li>
<li><strong>templates</strong>: template name, template file name without file extension (Mapbender is looking for file a4portrait.odg an a4portrait.pdf), Template files are located at app/Resources/MapbenderPrintBundle</li>
<li><strong>label</strong> - define a template label for the select-box</li>
<li><strong>optional_fields</strong> - define optional fields:<ul>
<li><strong>title</strong>: Name of the optional field, the default value is null (no optional fields are defined).</li>
<li><strong>label</strong>: Label of the optional field.</li>
<li><strong>options</strong>: { required: true } : Type of the optional field. Has to be true or false.</li>
</ul>
</li>
<li><strong>replace_pattern</strong> - You can modify the map-request for printing. You can add additional parameters like map_resolution (for MapServer).</li>
</ul>
<div class="section" id="yaml-definition">
<h3>YAML-Definition:<a class="headerlink" href="#yaml-definition" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l l-Scalar l-Scalar-Plain">target</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">map</span>                    <span class="c1"># Id of Map element to query</span>
<span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dialog</span>                   <span class="c1"># element or dialog, default is dialog</span>
<span class="l l-Scalar l-Scalar-Plain">templates</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">template</span><span class="p p-Indicator">:</span> <span class="nv">a4portrait</span><span class="p p-Indicator">,</span> <span class="nv">label</span><span class="p p-Indicator">:</span> <span class="nv">A4 Portrait</span><span class="p p-Indicator">}</span>   <span class="c1"># template name, template file name without file extension (Mapbender is looking for file a4portrait.odg an a4portrait.pdf), Template files are located at app/Resources/MapbenderPrintBundle</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">template</span><span class="p p-Indicator">:</span> <span class="nv">a4landscape</span><span class="p p-Indicator">,</span> <span class="nv">label</span><span class="p p-Indicator">:</span> <span class="nv">A4 Landscape</span><span class="p p-Indicator">}</span>         <span class="c1"># template label in the dialog</span>
<span class="l l-Scalar l-Scalar-Plain">scales</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">5000</span><span class="p p-Indicator">,</span> <span class="nv">10000</span><span class="p p-Indicator">,</span> <span class="nv">25000</span><span class="p p-Indicator">]</span>    <span class="c1"># define scales to choose from select-box or if empty free scale can be defined in a text-field</span>
<span class="l l-Scalar l-Scalar-Plain">quality_levels</span><span class="p p-Indicator">:</span>                                     <span class="c1"># define quality levels in dpi</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">dpi</span><span class="p p-Indicator">:</span> <span class="nv">72</span> <span class="p p-Indicator">,</span> <span class="nv">label</span><span class="p p-Indicator">:</span> <span class="nv">Draft (72dpi)</span><span class="p p-Indicator">}</span>             <span class="c1"># 72 - dpi value, Draft - label</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">dpi</span><span class="p p-Indicator">:</span> <span class="nv">288</span><span class="p p-Indicator">,</span>  <span class="nv">label</span><span class="p p-Indicator">:</span> <span class="nv">Document (288dpi)</span><span class="p p-Indicator">}</span>        <span class="c1"># 288 - dpi value, Document - label</span>
<span class="l l-Scalar l-Scalar-Plain">rotatable</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>                 <span class="c1"># true/false use true for rotation, default is true</span>
<span class="l l-Scalar l-Scalar-Plain">legend</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>                    <span class="c1"># true/false, default is false</span>
<span class="l l-Scalar l-Scalar-Plain">legend_default_behaviour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span> <span class="c1"># true/false, if true the legend check-box is checked by default</span>
<span class="l l-Scalar l-Scalar-Plain">file_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mapbender3</span>         <span class="c1"># define the file prefix for the PDF that is generated (file_prefix_date.pdf will be created)</span>
<span class="l l-Scalar l-Scalar-Plain">optional_fields</span><span class="p p-Indicator">:</span>                <span class="c1"># define optional fields (example title-field)</span>
    <span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span>                      <span class="c1"># name of the optional fields, default is null (no optional fields are defined)</span>
        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Title</span>            <span class="c1"># label of the optional field</span>
        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>                <span class="c1">#</span>
            <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>     <span class="c1"># true or false</span>
    <span class="l l-Scalar l-Scalar-Plain">comment1</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Comment 1</span>
        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">required</span><span class="p p-Indicator">:</span> <span class="nv">false</span> <span class="p p-Indicator">}</span>
    <span class="l l-Scalar l-Scalar-Plain">comment2</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Comment 2</span>
        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">required</span><span class="p p-Indicator">:</span> <span class="nv">false</span> <span class="p p-Indicator">}</span>
    <span class="l l-Scalar l-Scalar-Plain">editor</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Editor</span>
        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">required</span><span class="p p-Indicator">:</span> <span class="nv">true</span> <span class="p p-Indicator">}</span>
<span class="l l-Scalar l-Scalar-Plain">replace_pattern</span><span class="p p-Indicator">:</span>                 <span class="c1"># You can modify the map-request for printing</span>
        <span class="p p-Indicator">-</span>                        <span class="c1"># you can add additional parameters like map_resolution (for MapServer)</span>
            <span class="l l-Scalar l-Scalar-Plain">default</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">288</span><span class="p p-Indicator">:</span> <span class="s">&#39;&amp;map_resolution=288&#39;</span> <span class="p p-Indicator">}</span>
        <span class="p p-Indicator">-</span>
            <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&#39;stadtplan.xml&#39;</span>        <span class="c1"># or you can request a different service which is optimized for printing</span>
            <span class="l l-Scalar l-Scalar-Plain">replacement</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">288</span><span class="p p-Indicator">:</span> <span class="s">&#39;stadtplan_4.xml&#39;</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-widget-style">
<h2>Class, Widget &amp; Style<a class="headerlink" href="#class-widget-style" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Class: Mapbender\CoreBundle\Element\PrintClient</li>
<li>Widget: mapbender.element.printClient.js</li>
</ul>
</div>
<div class="section" id="file-location">
<h2>File location<a class="headerlink" href="#file-location" title="Permalink to this headline">¶</a></h2>
<p><strong>northarrow</strong>
The &#8220;North arrow&#8221; image is located at <strong>app/Resources/MapbenderPrintBundle/images/</strong>. You can replace the &#8220;North arrow&#8221; image to use a different image as northarrow.</p>
<p><strong>print templates</strong>
You find the print templates at <strong>app/Resources/MapbenderPrintBundle/templates/</strong>. Create your own print template to provide an individual output for your application.</p>
</div>
<div class="section" id="create-your-individual-templates">
<h2>Create your individual templates<a class="headerlink" href="#create-your-individual-templates" title="Permalink to this headline">¶</a></h2>
<p>To create an individual print template use an existing print template odg-file or create a new LibreOffice Draw file. Your template can have fixed objects like your logo, copyright or print information. In addition you have to create a layer for the dynamic elements like map, overview, northarrow, scale, date and optional fields. The dynamic layer is an additional non printable layer in your LibreOffice Draw file. Add this layer with <strong>Menu -&gt; Add -&gt; Layer -&gt; define a name for the layer and choose the option not printable</strong>.</p>
<a class="reference internal image-reference" href="../../../../../_images/print_template_odg1.png"><img alt="../../../../../_images/print_template_odg1.png" src="../../../../../_images/print_template_odg1.png" style="width: 758.4px; height: 540.0px;" /></a>
<p>Define areas for the map, northarrow, scale, date and optional fields.</p>
<p>The following objects are available from Mapbender:</p>
<ul class="simple">
<li>map</li>
<li>overview</li>
<li>scale</li>
<li>scalebar</li>
<li>date</li>
<li>northarrow</li>
<li>extent_ur_y, extent_ur_x, extent_ll_x, extent_ll_y (coordinates of the print extent)</li>
<li>dynamic_image (connected to group role)</li>
<li>dynamic_text (connected to group role)</li>
</ul>
<p>You can define optional fields in the element definition (like title, comment, editor) and add them to the Open Office Draw file.</p>
<p>When creating dynamic text each property must have the appropriate name, for example the filed <strong>comment1</strong> must have the name <strong>comment1</strong> in the Open Office Draw file. For naming fields, it is not enough to edit the content of the textfield. You need to edit the object name. Selct the textfiled and go to <strong>menue edit &#8211;&gt; name...</strong> to change the name.</p>
<a class="reference internal image-reference" href="../../../../../_images/print_template_name1.png"><img alt="../../../../../_images/print_template_name1.png" src="../../../../../_images/print_template_name1.png" style="width: 841.6px; height: 550.4px;" /></a>
<p>Export the template to pdf under the same name as the odg file. Use the name without extension in your print yml-definition.</p>
<p>The print script will read the information (position, size, font size, alignment) from the ODG file and will also use the PDF with the fixed objects to generate the new PDF.</p>
<p>Dependent of the group you can generate prints with different Logo and Text (f.e. the name of the commune and the individual logo). There are two objects which handle this - dynamic_image and dynamic_text. If these objects exists in your print layout Mapbender and you are member of a group Mapbender will look for an Image with the name of the group (groupname.png) and will be displayed in the print in the object dynamic_image. The height of the object will be used to scale the image and the width will be calculated relative to the height. In the object dynamic_text the group description will be printed.</p>
<p><strong>Printing elements in front of the map-element</strong></p>
<p>In order for the map-element to be as large as possible and to avoid white or empty areas, elements can be placed in front of the map image to prevent that space is lost through white areas. This is particularly useful in the case of large printing formats, such as DIN A1, which have a comparatively wide border.</p>
<p>To use this function, the templates have to be adapted and transparent PDF templates have to be created.</p>
<p>Adapt templates:</p>
<ul class="simple">
<li>Reorder elements in front of white background<ul>
<li>Arrange elements in the foreground<ul>
<li>Right click Arrange &#8211;&gt; To the front</li>
</ul>
</li>
<li>Arrange map-element in the background<ul>
<li>Right click Arrange &#8211;&gt; To the back</li>
</ul>
</li>
</ul>
</li>
<li>Select all<ul>
<li>Press CTRL + A</li>
</ul>
</li>
<li>Print selection as PDF<ul>
<li>Export as PDF</li>
<li>Selection instead of All</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="configuration-of-the-element">
<h2>Configuration of the element<a class="headerlink" href="#configuration-of-the-element" title="Permalink to this headline">¶</a></h2>
<p>Go to your application an create a new element <strong>printclient</strong> (Please note: You need a button to show this element or you can use it in the sidepane.)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../../index.html">
              <img class="logo" src="../../../../../_static/mapbender3_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PrintClient</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#yaml-definition">YAML-Definition:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-widget-style">Class, Widget &amp; Style</a></li>
<li><a class="reference internal" href="#file-location">File location</a></li>
<li><a class="reference internal" href="#create-your-individual-templates">Create your individual templates</a></li>
<li><a class="reference internal" href="#configuration-of-the-element">Configuration of the element</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="poi.html"
                        title="previous chapter">POI (MeetingPoint)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="redlining.html"
                        title="next chapter">Redlining</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/en/bundles/Mapbender/CoreBundle/elements/printclient.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="redlining.html" title="Redlining"
             >next</a> |</li>
        <li class="right" >
          <a href="poi.html" title="POI (MeetingPoint)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Mapbender3 Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" >Welcome to Mapbender3&#8217;s documentation!</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../../../bundles.html" >Bundle Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >MapbenderCoreBundle</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, The Mapbender Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>